{% verbatim %}
  <article ng-repeat="item in results" resource_id="{{ item.id }}" ng-cloak class="ng-cloak">
  	<div class="row items-list">
  	  <div class="col-xs-3 thumb">
  	    <a href="{{ item.detail_url }}"><img ng-src="{{ item.thumbnail_url }}" /></a>
  	  </div>
      <div class="col-xs-9 item-info">
        <div style="">
          {% endverbatim %}{% if request.user.is_authenticated %}
          <button class="btn btn-default btn-xs pull-right" ng-click="feature_select($event)">Select</button>
          {% endif %}{% verbatim %}

        </div> 
        <div style=""> 
          <h3><a href="{{ item.detail_url }}">{{ item.title }}</a></h3>
          <p ng-if="item.detail_url.indexOf('/documents/') > -1 && item.subtitle">{{ item.subtitle }}</p>
          <p ng-if="item.detail_url.indexOf('/documents/') > -1">Published {{ item.date | date:'d MMMM yyyy'}}</p>
          <p ng-if="item.detail_url.indexOf('/layers/') > -1">Layer from <a href="/people/profile/{{ item.owner__username }}">{{ item.owner__username }} </a> published {{ item.date | timeAgo }}</p>
          <p ng-if="item.detail_url.indexOf('/maps/') > -1">Map from <a href="/people/profile/{{ item.owner__username }}">{{ item.owner__username }} </a> published {{ item.date | timeAgo }}</p>

          <!-- <p>{{ item.category__gn_description }} <span class="owner">by <a href="/people/profile/{{ item.owner__username }}">{{ item.owner__username }}</a></span></p> -->
          <p class="abstract">{{ item.abstract }}</p>

          <!-- <p class="actions">
            <a href="{{ item.detail_url }}#info"><i class="fa fa-calendar-o"></i>{{ item.date|date:'d MMM y' }}</a> |
            <a href="{{ item.detail_url }}"><i class="fa fa-eye"></i>{{ item.popular_count }}</a> |
            <a href="{{ item.detail_url }}#share"><i class="fa fa-share"></i>{{ item.share_count }}</a> |
            <a href="{{ item.detail_url }}#rate"><i class="fa fa-star"></i>{{ item.rating }}</a> 
            <a ng-if="item.detail_url.indexOf('/layers/') > -1" 
              class="pull-right" href="{% endverbatim %}{% url "new_map" %}?layer={% verbatim %}{{ item.detail_url.substring(8) }}">
              <i class="fa fa-map-marker"></i>Create a Map</a>
            <a ng-if="item.detail_url.indexOf('/maps/') > -1" 
              class="pull-right" href="/maps/{{item.id}}/view">
              <i class="fa fa-map-marker"></i>View Map</a>
          </p> -->
          <ul class="nav stats">
            <li>
              <a href="{{ item.detail_url }}"><strong>{{ item.popular_count }}</strong> Views</a>
            </li>
            <li>
              <a href="{{ item.detail_url }}#rate">
                <!-- <strong> -->
                  <div class="star-rating">
                      <!-- The '|| 0' would prevent an undefined or null value on the Rating property -->
                      <div class="full-star" style="width: {{item.rating * 20 || 0}}%"></div>         
                      <div class="empty-star"> </div>
                      
                  </div>
                  ({{item.rating}})
                  <!-- <div class="overall_rating" style="float:left" data-score="{{ item.rating }}"></div> ({{item.rating}}) -->
                  <!-- TODO: Add display of who gave what rating based -->
                <!-- </strong> -->
              </a>
            </li> 
            <li ng-if="item.detail_url.indexOf('/layers/') > -1">
              <a href="{% endverbatim %}{% url "new_map" %}?layer={% verbatim %}{{ item.detail_url.substring(8) }}">
                <div>
                  <br/>
                  <i class="fa fa-map-marker"></i> Create a Map
                </div>
              </a>  
            </li> 
            <li ng-if="item.detail_url.indexOf('/maps/') > -1">
              <a href="/maps/{{item.id}}/view">
                <div>
                  <br/>
                  <i class="fa fa-map-marker"></i> View Map
                </div>
              </a>  
            </li>
            <li ng-if="item.detail_url.indexOf('/documents/') > -1 && item.papersize">
              <a>
                <div>
                  <i class="papersizesymbol glyphicon glyphicon-file"><span class="papersizevalue">{{ item.papersize }}</span></i> 
                </div>
              </a>  
            </li>
            <li ng-if="item.detail_url.indexOf('/documents/') > -1 && item.datasource">
              <a>
                <div>
                  <div>Data Sources</div>
                  <div>{{ item.datasource }}</div>
                </div>
              </a>  
            </li>
            <li ng-if="item.detail_url.indexOf('/documents/') > -1 && item.version">
              <a>
                <div>
                  <div>Version</div>
                  <div>{{ item.version }}</div>
                </div>
              </a>  
            </li>
            <li ng-if="item.detail_url.indexOf('/documents/') > -1 && item.region_description">
              <a>
                <div>
                  <div>Region</div>
                  <div>{{ item.region_description }}</div>
                </div>
              </a>  
            </li>
            <li ng-if="item.detail_url.indexOf('/documents/') > -1 && item.keyword_description">
              <a>
                <div>
                  <div>Keywords</div>
                  <div>{{ item.keyword_description }}</div>
                </div>
              </a>  
            </li>
          </ul>  
        </div>
      </div>
    </div>
  </article>
{% endverbatim %}